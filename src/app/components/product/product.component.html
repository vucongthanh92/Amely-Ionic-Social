<ion-header>
  <ion-navbar hideBackButton>
    <ion-buttons start>
      <button class="ion_navbar_box" ion-button (click)="dismiss()">
        <ion-icon class="ion_navbar_icon" ios="md-arrow-back" md="md-arrow-back"></ion-icon>
      </button>
      <div *ngIf="product" class="ion_navbar_title product_navbar_width">{{product.title}}</div>
    </ion-buttons>

    <ion-buttons end>
      <button ion-button clear (click)="changePage()">
        <ion-icon class="product_topbar_cart" name="md-cart">
          <ion-badge class="product_topbar_cart_icon" color="danger" *ngIf="count_product">{{ count_product }}</ion-badge>
        </ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content class="outer-content" *ngIf="product">
  <ion-row>
    <ion-col col-12 *ngIf="product.images_entities" class="product_image">
      <img imageViewer *ngIf="product.images_entities[product.images[0]]" src="{{product.images_entities[product.images[0]]}}">
    </ion-col>
    <ion-col col-12 *ngIf="!product.images_entities" class="product_image">
      <img imageViewer *ngIf="product.images[0]" src="{{ product.images[0] }}">
      <img imageViewer *ngIf="!product.images[0]" src="assets/imgs/image_not_found.jpg">
    </ion-col>
  </ion-row>

  <ion-card>
    <ion-card-content>
      <ion-row>
        <ion-col class="product_box_title" col-12>{{product.title}}</ion-col>
        <ion-col class="product_box_price" col-12>
          <!-- {{formatSalePrice(product.sale_price,product.currency)}} -->
          <div *ngIf="product.sale_price == 0 || product.sale_price == null; else other_content">
            <div class="product_feature_price">{{ formatSalePrice( product.price, product.currency) }}</div>
          </div>
          <ng-template #other_content>
              <div class="product_feature_price">{{formatSalePrice(product.sale_price,product.currency)}}</div>
              <div class="product_sale_price">{{ formatSalePrice( product.price, product.currency) }}</div>
          </ng-template>
        </ion-col>
      </ion-row>
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="shop">
    <ion-card-header>Thông tin cửa hàng</ion-card-header>
    <ion-card-content (click)="openShop()">
      <ion-row>
        <ion-col col-6 class="product_info_label">Tên cửa hàng</ion-col>
        <ion-col col-6>{{shop.owner_name}}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 class="product_info_label">Địa chỉ cửa hàng</ion-col>
        <ion-col col-6>{{shop.owner_address}}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 class="product_info_label">Số điện thoại</ion-col>
        <ion-col col-6>{{shop.owner_phone}}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 class="product_info_label">Mã số thuế</ion-col>
        <ion-col col-6>{{shop.shop_bidn}}</ion-col>
      </ion-row>
    </ion-card-content>
  </ion-card>

  <ion-card class="product_description">
    <ion-card-header>Mô tả sản phẩm</ion-card-header>
    <ion-card-content>{{product.description}}</ion-card-content>
  </ion-card>
</ion-content>

<ion-footer *ngIf="product" >


  <button *ngIf="product.quantity>0 && product.approved != 'new' && product.approved != 'suspended';else other_content" 
    ion-button block class="product_add_cart_btn" (click)="putCartLocal(product)"> Thêm vào giỏ hàng
  </button>
  <ng-template #other_content>
    <!-- <button ion-button block color="danger" >
      Hết hàng
    </button> -->
  </ng-template>
</ion-footer>