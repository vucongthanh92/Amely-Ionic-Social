<ion-header>
  <ion-navbar>
    <ion-title *ngIf="event">{{event.title}}</ion-title>
    <ion-buttons end *ngIf="is_user">
      <button ion-button (click)="openPopover($event)">
        <ion-icon name="md-more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content class="outer-content" *ngIf="event">
  <div class="about-header">
    <img src="assets/imgs/logo.png" alt="ionic logo">

  </div>
  <div class="bar bar-header bar-dark" style="background-color: #fff;">
    <ion-segment color="primary" [(ngModel)]="eventTab" style="border-bottom: 1px solid #eee;">
      <ion-segment-button value="newfeed" class="segment-button" style="border-radius: 0px; border: 0px; font-size: 20px; border-right: 1px solid #eee;"
        (click)="goToPage('newfeed');">
        <img id="tabIconFeeds" />
        <div class="txtTitle">Cập Nhật</div>
      </ion-segment-button>
      <ion-segment-button value="members" class="segment-button" style="border-radius: 0px; border: 0px; font-size: 20px" (click)="goToPage('members');">
        <img id="tabIconMember" />
        <div class="txtTitle">Bạn Bè</div>

      </ion-segment-button>
    </ion-segment>
    <ion-row text-center *ngIf="event.has_inventory=='1'">
      <ion-col col-6>
        <button ion-button icon-left clear small color="danger" (click)="goToPage('gift')">
          <ion-icon name="thumbs-up"></ion-icon>
          <div>Tặng quà</div>
        </button>
      </ion-col>
    </ion-row>
  </div>

  <div *ngIf="newfeedsPage">
    <ion-card style="margin-left: 0px; margin-right: 0px; width: 100%">
      <ion-card-content>
        <ion-row>
          <ion-col col-12>
            <p>
              <img class="iconGroup" src="assets/imgs/ic_setting_private_actived.png"> Quản trị : {{event.creator.fullname}}
            </p>
            <p>
              <img class="iconGroup" src="assets/imgs/ic_inventory_history_actived.png"> Ngày lập: {{convertDate(event.time_created) | date: ' H:mm dd/MM/yyyy'}}
            </p>
            <p>
              <img class="iconGroup" src="assets/imgs/ic_member_actived.png"> Số thành viên: {{countMember()}}
            </p>
            <p *ngIf="eventService.publish==0">
              <img class="iconGroup" src="assets/imgs/ic_member_actived.png">Sự kiện đã đóng
            </p>
            <p *ngIf="eventService.publish==1">
              <img class="iconGroup" src="assets/imgs/ic_member_actived.png">Sự kiện đã mở và chưa công bố
            </p>
            <p *ngIf="eventService.publish==2">
              <img class="iconGroup" src="assets/imgs/ic_member_actived.png">Sự kiện đã được công bố
            </p>
            <p *ngIf="eventService.publish==3">
              <img class="iconGroup" src="assets/imgs/ic_member_actived.png">Sự kiện đã được công bố và đã đóng
            </p>
          </ion-col>
        </ion-row>
      </ion-card-content>
    </ion-card>
    <ion-list>
      <ion-list *ngIf="event_guid">
        <app-feeds [type]="'event'" [feed_type]="event" [owner_guid]="event_guid"></app-feeds>
      </ion-list>
    </ion-list>
  </div>
  <div *ngIf="membersPage">
    <ion-list>
      <p>Chủ sự kiện</p>
      <ion-item *ngIf="getUser(event.creator.guid)">
        <img width="50px" height="50px"  src="{{getUser(event.creator.guid).avatar}}"> {{getUser(event.creator.guid).fullname}}
      </ion-item>
    </ion-list>
    <ion-list>
      <p>Đồng tổ chức</p>
      <div *ngFor="let guid of string_members">
        <ion-item *ngIf="getUser(guid)">
          <img width="50px" height="50px"  src="{{getUser(guid).avatar}}"> {{getUser(guid).fullname}}
        </ion-item>
      </div>
    </ion-list>
    <ion-list>
      <p>Khách mời</p>
      <div *ngFor="let guid of string_guests">
        <ion-item *ngIf="getUser(guid)">
          <img width="50px" height="50px" *ngIf="getUser(guid)" src="{{getUser(guid).avatar}}"> {{getUser(guid).fullname}}
        </ion-item>
      </div>
    </ion-list>
  </div>
</ion-content>